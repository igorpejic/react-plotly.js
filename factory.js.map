{"version":3,"sources":["../src/factory.js"],"names":["plotComponentFactory","eventNames","updateEvents","isBrowser","window","Plotly","hasReactAPIMethod","react","PlotlyComponent","props","p","Promise","resolve","fitHandler","resizeHandler","handlers","datarevision","syncWindowResize","bind","syncEventHandlers","attachUpdateEvents","getRef","handleUpdate","handleUpdateWithProps","nextProps","revision","then","layout","newPlot","el","data","resizedLayoutIfFit","config","frames","onInitialized","catch","console","error","e","onError","err","onPurge","removeEventListener","removeUpdateEvents","purge","removeListener","i","length","on","onUpdate","invoke","fit","relayout","getSize","addEventListener","useResizeHandler","Plots","resize","debug","gd","eventName","prop","hasHandler","toLowerCase","rect","layoutWidth","width","layoutHeight","height","hasWidth","hasHeight","parentElement","getBoundingClientRect","parseInt","style","className","propTypes","bool","arrayOf","object","number","func","string","defaultProps","position","display"],"mappings":"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","file":"factory.js","sourcesContent":["import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport isNumeric from 'fast-isnumeric';\nimport objectAssign from 'object-assign';\n\n// The naming convention is:\n//   - events are attached as `'plotly_' + eventName.toLowerCase()`\n//   - react props are `'on' + eventName`\nconst eventNames = [\n  'AfterExport',\n  'AfterPlot',\n  'Animated',\n  'AnimatingFrame',\n  'AnimationInterrupted',\n  'AutoSize',\n  'BeforeExport',\n  'ButtonClicked',\n  'Click',\n  'ClickAnnotation',\n  'Deselect',\n  'DoubleClick',\n  'Framework',\n  'Hover',\n  'Relayout',\n  'Restyle',\n  'Redraw',\n  'Selected',\n  'Selecting',\n  'SliderChange',\n  'SliderEnd',\n  'SliderStart',\n  'Transitioning',\n  'TransitionInterrupted',\n  'Unhover',\n];\n\nconst updateEvents = [\n  'plotly_restyle',\n  'plotly_redraw',\n  'plotly_relayout',\n  'plotly_doubleclick',\n  'plotly_animated',\n];\n\n// Check if a window is available since SSR (server-side rendering)\n// breaks unnecessarily if you try to use it server-side.\nconst isBrowser = typeof window !== 'undefined';\n\nexport default function plotComponentFactory(Plotly) {\n  const hasReactAPIMethod = !!Plotly.react;\n\n  class PlotlyComponent extends Component {\n    constructor(props) {\n      super(props);\n\n      this.p = Promise.resolve();\n      this.fitHandler = null;\n      this.resizeHandler = null;\n      this.handlers = {};\n      this.datarevision = null;\n\n      this.syncWindowResize = this.syncWindowResize.bind(this);\n      this.syncEventHandlers = this.syncEventHandlers.bind(this);\n      this.attachUpdateEvents = this.attachUpdateEvents.bind(this);\n      this.getRef = this.getRef.bind(this);\n      this.handleUpdate = this.handleUpdate.bind(this);\n      this.handleUpdateWithProps = this.handleUpdateWithProps.bind(this);\n    }\n\n    shouldComponentUpdate(nextProps) {\n      return (\n        nextProps.revision === void 0 ||\n        nextProps.revision !== this.props.revision\n      );\n    }\n\n    componentDidMount() {\n      this.p = this.p\n        .then(() => {\n          this.datarevision = this.props.layout\n            ? this.props.layout.datarevision\n            : null;\n          return Plotly.newPlot(this.el, {\n            data: this.props.data,\n            layout: this.resizedLayoutIfFit(this.props.layout),\n            config: this.props.config,\n            frames: this.props.frames,\n          });\n        })\n        .then(() => this.syncWindowResize(null, false))\n        .then(this.syncEventHandlers)\n        .then(this.attachUpdateEvents)\n        .then(\n          () => this.props.onInitialized && this.props.onInitialized(this.el)\n        )\n        .catch(e => {\n          console.error('Error while plotting:', e);\n          return this.props.onError && this.props.onError();\n        });\n    }\n\n    componentWillUpdate(nextProps) {\n      this.p = this.p\n        .then(() => {\n          if (\n            hasReactAPIMethod &&\n            nextProps.layout.datarevision === this.datarevision\n          ) {\n            return Plotly.react(this.el, {\n              data: nextProps.data,\n              layout: this.resizedLayoutIfFit(nextProps.layout),\n              config: nextProps.config,\n              frames: nextProps.frames,\n            });\n          } else {\n            this.handlers = {};\n            return Plotly.newPlot(this.el, {\n              data: nextProps.data,\n              layout: this.resizedLayoutIfFit(nextProps.layout),\n              config: nextProps.config,\n              frames: nextProps.frames,\n            });\n          }\n        })\n        .then(() => this.syncEventHandlers(nextProps))\n        .then(() => this.syncWindowResize(nextProps))\n        .then(() => {\n          if (!hasReactAPIMethod) this.attachUpdateEvents();\n        })\n        .then(() => this.handleUpdateWithProps(nextProps))\n        .catch(err => {\n          console.error('Error while plotting:', err);\n          this.props.onError && this.props.onError(err);\n        });\n    }\n\n    componentWillUnmount() {\n      if (this.props.onPurge) {\n        this.props.onPurge(this.el);\n      }\n      if (this.fitHandler && isBrowser) {\n        window.removeEventListener('resize', this.fitHandler);\n        this.fitHandler = null;\n      }\n      if (this.resizeHandler && isBrowser) {\n        window.removeEventListener('resize', this.resizeHandler);\n        this.resizeHandler = null;\n      }\n\n      this.removeUpdateEvents();\n\n      Plotly.purge(this.el);\n    }\n\n    attachUpdateEvents() {\n      if (!this.el || !this.el.removeListener) return;\n\n      for (let i = 0; i < updateEvents.length; i++) {\n        this.el.on(updateEvents[i], this.handleUpdate);\n      }\n    }\n\n    removeUpdateEvents() {\n      if (!this.el || !this.el.removeListener) return;\n\n      for (let i = 0; i < updateEvents.length; i++) {\n        this.el.removeListener(updateEvents[i], this.handleUpdate);\n      }\n    }\n\n    handleUpdate() {\n      this.handleUpdateWithProps(this.props);\n    }\n\n    handleUpdateWithProps(props) {\n      if (props.onUpdate && typeof props.onUpdate === 'function') {\n        props.onUpdate(this.el);\n      }\n    }\n\n    syncWindowResize(props, invoke) {\n      props = props || this.props;\n      if (!isBrowser) return;\n\n      if (props.fit && !this.fitHandler) {\n        this.fitHandler = () => {\n          return Plotly.relayout(this.el, this.getSize());\n        };\n        window.addEventListener('resize', this.fitHandler);\n\n        if (invoke) return this.fitHandler();\n      } else if (!props.fit && this.fitHandler) {\n        window.removeEventListener('resize', this.fitHandler);\n        this.fitHandler = null;\n      }\n\n      if (props.useResizeHandler && !this.resizeHandler) {\n        this.resizeHandler = () => {\n          return Plotly.Plots.resize(this.el);\n        };\n        window.addEventListener('resize', this.resizeHandler);\n      } else if (!props.useResizeHandler && this.resizeHandler) {\n        window.removeEventListener('resize', this.resizeHandler);\n        this.resizeHandler = null;\n      }\n    }\n\n    getRef(el) {\n      this.el = el;\n\n      if (this.props.debug && isBrowser) {\n        window.gd = this.el;\n      }\n    }\n\n    // Attach and remove event handlers as they're added or removed from props:\n    syncEventHandlers(props) {\n      // Allow use of nextProps if passed explicitly:\n      props = props || this.props;\n\n      for (let i = 0; i < eventNames.length; i++) {\n        const eventName = eventNames[i];\n        const prop = props['on' + eventName];\n        const hasHandler = !!this.handlers[eventName];\n\n        if (prop && !hasHandler) {\n          this.handlers[eventName] = prop;\n          this.el.on(\n            'plotly_' + eventName.toLowerCase(),\n            this.handlers[eventName]\n          );\n        } else if (!prop && hasHandler) {\n          // Needs to be removed:\n          this.el.removeListener(\n            'plotly_' + eventName.toLowerCase(),\n            this.handlers[eventName]\n          );\n          delete this.handlers[eventName];\n        }\n      }\n    }\n\n    resizedLayoutIfFit(layout) {\n      if (!this.props.fit) {\n        return layout;\n      }\n      return objectAssign({}, layout, this.getSize(layout));\n    }\n\n    getSize(layout) {\n      let rect;\n      layout = layout || this.props.layout;\n      const layoutWidth = layout ? layout.width : null;\n      const layoutHeight = layout ? layout.height : null;\n      const hasWidth = isNumeric(layoutWidth);\n      const hasHeight = isNumeric(layoutHeight);\n\n      if (!hasWidth || !hasHeight) {\n        rect = this.el.parentElement.getBoundingClientRect();\n      }\n\n      return {\n        width: hasWidth ? parseInt(layoutWidth) : rect.width,\n        height: hasHeight ? parseInt(layoutHeight) : rect.height,\n      };\n    }\n\n    render() {\n      return (\n        <div\n          style={this.props.style}\n          ref={this.getRef}\n          className={this.props.className}\n        />\n      );\n    }\n  }\n\n  PlotlyComponent.propTypes = {\n    fit: PropTypes.bool,\n    data: PropTypes.arrayOf(PropTypes.object),\n    config: PropTypes.object,\n    layout: PropTypes.object,\n    frames: PropTypes.arrayOf(PropTypes.object),\n    revision: PropTypes.number,\n    onInitialized: PropTypes.func,\n    onPurge: PropTypes.func,\n    onError: PropTypes.func,\n    onUpdate: PropTypes.func,\n    debug: PropTypes.bool,\n    style: PropTypes.object,\n    className: PropTypes.string,\n    useResizeHandler: PropTypes.bool,\n  };\n\n  for (let i = 0; i < eventNames.length; i++) {\n    PlotlyComponent.propTypes['on' + eventNames[i]] = PropTypes.func;\n  }\n\n  PlotlyComponent.defaultProps = {\n    debug: false,\n    fit: false,\n    useResizeHandler: false,\n    data: [],\n    style: {position: 'relative', display: 'inline-block'},\n  };\n\n  return PlotlyComponent;\n}\n"]}